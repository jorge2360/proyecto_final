{% extends 'dashboard/panel_base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h4><i class="bi bi-bag-check"></i> Pedidos</h4>
</div>

<table class="table table-hover shadow-sm align-middle">
  <thead class="table-light">
    <tr>
      <th>ID</th>
      <th>Cliente</th>
      <th>Fecha</th>
      <th>Estado</th>
      <th>Total</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for p in pedidos %}
    <tr>
      <td>{{ p.id }}</td>
      <td>{{ p.cliente }}</td>
      <td>{{ p.fecha_creacion|date:"d/m/Y H:i" }}</td>
      <td>
        <span class="badge 
          {% if p.estado == 'Pendiente' %} bg-warning 
          {% elif p.estado == 'Enviado' %} bg-info 
          {% elif p.estado == 'Entregado' %} bg-success 
          {% else %} bg-secondary {% endif %}">
          {{ p.estado }}
        </span>
      </td>
      <td>Q{{ p.total }}</td>
      <td class="text-end">
        <a href="{% url 'dashboard:pedido_cambiar_estado' p.id %}" class="btn btn-sm btn-outline-primary">
          <i class="bi bi-pencil-square"></i>
        </a>
      </td>
    </tr>
    {% empty %}
    <tr><td colspan="6" class="text-center text-muted">No hay pedidos registrados.</td></tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
